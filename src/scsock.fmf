# scsock AKA –∫–æ—Å—Ç—ã–ª–∏ –Ω–∞ setxkbmap
/// ceheki! / 26 May 2023 / code

–ù–∞ —Å—Ç–∞—Ä—ã—Ö —Å–∫—Ä–∏–Ω–∞—Ö –º–æ–µ–≥–æ –¥–µ—Å–∫—Ç–æ–ø —Ä–∞–π—Å–∞ (ü•∞) —è –∫–∏–¥–∞–ª –≤ polybar –º–æ–¥—É–ª—å,
–∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–µ–∫—É—â–∏–π workflow. –ü–æ —Ñ–∞–∫—Ç—É –æ–Ω —Ç—É–ø–æ —á–∏—Ç–∞–ª —Ñ–∞–π–ª
`~/.workflow`, –≤ –∫–æ—Ç–æ—Ä—ã–π —è –Ω–∏–∫–æ–≥–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–∏—Å–∞–ª, –∏–∑-–∑–∞ —á–µ–≥–æ –º–æ–¥—É–ª—å
–∏ –±—ã–ª –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω. –ù–æ –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑ 3 –≥–æ–¥–∞ —è –Ω–∞—à—ë–ª –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–æ–º—É, –ø—Ä–∞–≤–¥–∞
—É–∂–µ –Ω–∞ dwm –∏ —á–µ—Ä–µ–∑ UNIX —Å–æ–∫–µ—Ç—ã.

## –ü–∞—Ä—É —Å–ª–æ–≤ –æ `scsock`

–û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∞—è –ø—Ä–æ–≥—Ä–º–º–º–∞ –¥–ª—è –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –∑–∞–¥–∞–Ω–Ω—ã—Ö —Å—Ç–µ–π—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç—ã.
–û—Å–Ω–æ–≤–Ω–∞—è —Ñ–∏—á–∞ -- —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ª—é–±—ã–º –±–æ–ª–µ–µ –º–µ–Ω–µ–µ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º —è–∑—ã–∫–æ–º.

–í–æ—Ç –ø—Ä–æ—Å—Ç–æ–π –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞:

```lang: toml, file: scsock.toml
socket = "/tmp/foo.socket"
# optional, default: false
remove-socket-if-exists = true

[actions]
foo = "echo foo"
bar = { title = "Bar", do = "echo bar" }
```

–ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ `-c path/to/config.toml`, –Ω–æ –º–Ω–µ –≤–ø–∞–¥–ª—É –µ–≥–æ
–ø–æ 1000 —Ä–∞–∑ –ø–∏—Å–∞—Ç—å, –ø–æ—ç—Ç–æ–º—É –∏ —Ç–∞–∫ –¥–æ–≥–∞–¥–∞–µ—Ç–µ—Å—å. –ö—Å—Ç–∞—Ç–∏, —Å–æ–∫–µ—Ç –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑
`-s /boot/vmlinuz-linux`.

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `scsock start`, –Ω—É –∏ —Ç–∞–º –ø–æ –º–µ–ª–æ—á–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã. –Ø –∏—Ö —Å–¥–µ–ª–∞–ª
—Ç—É–ø–æ —á—Ç–æ–±—ã —Ç–µ—Å—Ç–∏—Ç—å. –í—Å—ë –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —è –æ–±—ã—á–Ω–æ –¥–µ–ª–∞–ª –Ω–∞ —Å–∏. (PS: –Ω–∞–ø–∏–∑–¥–µ–ª, –ª–æ–ª)

–ï—Å–ª–∏ –≤–∞–º —Ö–æ—á–µ—Ç—Å—è –ø–æ—á–∏—Ç–∞—Ç—å –ø–æ-–±–æ–ª—å—à–µ –æ–± —ç—Ç–æ–º –≥–æ–≤–Ω–µ, —Ç–æ –≥–∏—Ç—Ö–∞–±:
\(https://github.com/ValgrindLLVM/scsock)[ValgrindLLVM/scsock].

## Super-puper DWM rice

–ï—Å–ª–∏ –∫—Ä–∞—Ç–∫–æ, —Ç–æ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ (root title) —è —é–∑–∞—é
\(https://github.com/ValgrindLLVM/dwm-status)[dwm-status], –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ —Å–∏.
–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –∫–æ–≥–¥–∞ —è –ø–∏—Å–∞–ª `scsock` –º–Ω–µ –±—ã–ª–∞ –≤–∞–∂–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å–∏, –∞ —Ç–∞–∫ –∂–µ
—è –Ω–µ —Ö–æ—Ç–µ–ª –¥–µ–ª–∞—Ç—å –≤—Å—ë —Ç—É–ø–æ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã (–Ω–∞ –¥–∏—Å–∫–µ).

–ö–∞–∫ –ø–∏—Å–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ `dwm-status` –º–Ω–µ –æ–±—ä—è—Å–Ω—è—Ç—å –≤–ø–∞–¥–ª—É, –º–æ–∂–µ—Ç –Ω–∞–ø–∏—à—É –Ω–∞ –ª–æ—Ä–µ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å
–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é. –ù—É... –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–¥–Ω–µ–º—É —Å–∞–º –ª–æ—Ä...

## –°–∞–º–∞ –ø—Ä–æ–±–ª–µ–º–∞

_–î–∞, –≤–æ—Ç –∫—Ç–æ-—Ç–æ —Ä–æ—Ñ–ª–∏—Ç —á—Ç–æ —Ö—ã... –¥–≤–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –Ω—É–∂–Ω–æ –≤—Å—ë –≤—Ä–µ–º—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å, —Ö—ã._
_–í—ã –±—ã –∑–Ω–∞–ª–∏ –∫–∞–∫ –æ—Ö—É–µ–Ω–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ä–∞—Å–∫–ª–∞–¥–∫—É, –∞ –ø–æ—Ç–æ–º –æ—Ö—É–µ—Ç—å —á—Ç–æ —Ç—ã —Å—É–∫–∞ –ø–∏—à–µ—à—å –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º_
*(nanoqsh)*

–í –æ–±—â–µ–º, —á–µ—Ä–µ–∑ `setxkbmap` –≤ –∫–æ–Ω—Ñ–∏–≥–µ `scsock` —è —Å–¥–µ–ª–∞–ª –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è: `ru` –∏ `kz`. –¢–∞–∫–∂–µ —á–µ—Ä–µ–∑
dwm –∑–∞–±–∏–Ω–¥–∏–ª `<win>o` –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã –∏—Ö –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å (`scsock next`). –í –æ–±—â–µ–º, –ø–æ–ª—É—á–∏–ª–æ—Å—å —Ç–∞–∫, —á—Ç–æ
–≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —è —Å–∏–∂—É —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–≤—É—Ö —Ä–∞—Å–∫–ª–∞–¥–∫–∞—Ö, –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ `us,ru`, —Ç–∞–∫ –∏
`us,kz`. –û–±—ã—á–Ω–æ —Å–ª—É—á–∞–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ –º–Ω–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ru` –∏ `kz` —Ä–∞—Å–∫–ª–∞–¥–∫—É
–≤–º–µ—Å—Ç–µ, –ø–æ—ç—Ç–æ–º—É —è –¥—É–º–∞—é, —á—Ç–æ —ç—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ç–∞–ø.

```lang: toml, file: lang-sclock.toml
socket = "/home/fox/.local/lang.socket"
remove-socket-if-exists = true

[actions]
ru = "setxkbmap -layout us,ru -option ..."
kz = "setxkbmap -layout us,kz -option ..."
```

–ö—Å—Ç–∞—Ç–∏, –∑–∞–±–∞–≤–Ω—ã–π —Ñ–∞–∫—Ç: –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ `ru` —Ä–∞—Å–∫–ª–∞–¥–∫–µ, —Ç–æ —Ç–∞–∫ –≤—ã –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ `kz`. –¢–æ
–µ—Å—Ç—å –≤–∞—Å –Ω–µ –≤—ã–±—Ä–æ—Å–∏—Ç –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–¥–æ–±–Ω–æ.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ –≤–∞–º –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è, —á—Ç–æ —è –º–µ–Ω—è—é —à–∏–ª–æ –Ω–∞ –∫—É—Å–æ–∫ –≥–æ–≤–Ω–∞, —Ç–∞–∫ –∫–∞–∫ –≤–º–µ—Å—Ç–æ —Ç—Ä—ë—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–∫
—è –ø–æ–ª—É—á–∏–ª 2x2 —Ä–∞—Å–∫–ª–∞–¥–∫–∏:

```
<caps> ->
+----+----+
| us | ru | 
+----+----+ ^
| us | kz | |
+----+----+ <win>o
```

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç–∞–∫ –æ–Ω–æ –∏ –µ—Å—Ç—å. –ï—Å–ª–∏ –≤—ã –ø—Ä–∏–≤—ã–∫–ª–∏ —Å–∏–¥–µ—Ç—å –Ω–∞ 3—Ö —Ä–∞—Å–∫–ª–∞–¥–∫–∞—Ö, —Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ —Å–ª—É—á–∏—Ç—Å—è
–ø–∏–∑–¥–µ—Ü, –∏ –≤—ã –±—É–¥–µ—Ç–µ –ø–∏—Å–∞—Ç—å –µ—â—ë –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º: cerf. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ—Ç —Å–µ—Ç–∞–ø –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω –º–∞–º–∫–∏–Ω—ã–º
—ç–º–∏–≥—Ä–∞–Ω—Ç–∞–º, —á—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–µ–¥–∞–≤–Ω–æ –æ—Ç–∫—Ä—ã–ª–∏ –¥–ª—è —Å–µ–±—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —è–∑—ã–∫–æ–≤, –∫—Ä–æ–º–µ –∏–º–ø–µ—Ä—Å–∫–∏—Ö.

